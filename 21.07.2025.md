# ğŸ”„ Update: Wechsel von ST-Link-Tools zu OpenOCD

Die ST-Link-Software (V1) erwies sich in meinem Setup als **nicht zuverlÃ¤ssig genug**.  
Folgende Probleme traten auf:

## âŒ Probleme mit ST-Link (st-flash)

- **Flashen und LÃ¶schen** schlugen fehl:
  ```bash
  st-flash --connect-under-reset write build/BlinkingLights.bin 0x08000000
  st-flash erase

â†’ Verbindungsfehler (LIBUSB_ERROR_PIPE), kein Zugriff auf das Target.

    Lesen des Flash-Speichers funktionierte nicht:

    st-flash read testErase.bin 0x08000000 0x4000

    â†’ FlashgrÃ¶ÃŸe = 0, Chip-ID = 0x000 â†’ Target wurde nicht erkannt.

ğŸ’¡ Vermutete Ursache

    Die verwendete ST-Link-Hardware ist Version V1.

    Diese wird von st-flash nur eingeschrÃ¤nkt oder gar nicht unterstÃ¼tzt.

    Auch st-info gibt ungÃ¼ltige Werte zurÃ¼ck:

    flash: 0 (pagesize: 0)
    chipid: 0x000

âœ… LÃ¶sung: Wechsel zu OpenOCD

Um zuverlÃ¤ssig flashen und debuggen zu kÃ¶nnen, wurde OpenOCD eingesetzt. Vorteile:

    Kompatibel mit ST-Link V1

    ZuverlÃ¤ssige Verbindung mit dem Target

    Direkte Steuerung via Telnet mÃ¶glich

ğŸ“‹ Beispielhafte Telnet-Sitzung

telnet localhost 4444

reset halt
flash write_image /pfad/zur/BlinkingLights.bin 0x08000000
reset run

ğŸ“¤ Flash-Dump zum ÃœberprÃ¼fen des Speichers

dump_image flash_dump.bin 0x08000000 0x20000

Analyse z.â€¯B. mit:

hexdump -C flash_dump.bin

ğŸ›  Konfiguration fÃ¼r OpenOCD

source [find interface/stlink-v1.cfg]
transport select hla_swd
source [find target/stm32f1x.cfg]
reset_config srst_only

âš ï¸ Stelle sicher, dass der Pfad zur .bin-Datei korrekt und absolut ist, z.â€¯B.:

flash write_image /home/username/projekt/BlinkingLights.bin 0x0800000